{
  "version": "14",
  "extractedFrom": ["crm.py", "database.py", "product_db.py"],
  "tables": {
    "customers": {
      "tableName": "customers",
      "pythonSource": "crm.py:create_tables_crm",
      "columns": [
        {"name": "id", "type": "INTEGER", "primaryKey": true, "autoIncrement": true},
        {"name": "salutation", "type": "TEXT", "nullable": true},
        {"name": "title", "type": "TEXT", "nullable": true},
        {"name": "first_name", "type": "TEXT", "notNull": true},
        {"name": "last_name", "type": "TEXT", "notNull": true},
        {"name": "company_name", "type": "TEXT", "nullable": true},
        {"name": "address", "type": "TEXT", "nullable": true},
        {"name": "house_number", "type": "TEXT", "nullable": true},
        {"name": "zip_code", "type": "TEXT", "nullable": true},
        {"name": "city", "type": "TEXT", "nullable": true},
        {"name": "state", "type": "TEXT", "nullable": true},
        {"name": "region", "type": "TEXT", "nullable": true},
        {"name": "email", "type": "TEXT", "nullable": true},
        {"name": "phone_landline", "type": "TEXT", "nullable": true},
        {"name": "phone_mobile", "type": "TEXT", "nullable": true},
        {"name": "income_tax_rate_percent", "type": "REAL", "default": 0.0},
        {"name": "creation_date", "type": "TEXT", "nullable": true},
        {"name": "last_updated", "type": "TEXT", "nullable": true}
      ],
      "crudOperations": [
        {"method": "save_customer", "pythonRef": "crm.py:save_customer"},
        {"method": "load_customer", "pythonRef": "crm.py:load_customer"},
        {"method": "delete_customer", "pythonRef": "crm.py:delete_customer"},
        {"method": "load_all_customers", "pythonRef": "crm.py:load_all_customers"}
      ]
    },
    "projects": {
      "tableName": "projects",
      "pythonSource": "crm.py:create_tables_crm",
      "columns": [
        {"name": "id", "type": "INTEGER", "primaryKey": true, "autoIncrement": true},
        {"name": "customer_id", "type": "INTEGER", "notNull": true, "foreignKey": "customers(id)"},
        {"name": "project_name", "type": "TEXT", "notNull": true},
        {"name": "project_status", "type": "TEXT", "nullable": true},
        {"name": "roof_type", "type": "TEXT", "nullable": true},
        {"name": "roof_covering_type", "type": "TEXT", "nullable": true},
        {"name": "free_roof_area_sqm", "type": "REAL", "nullable": true},
        {"name": "roof_orientation", "type": "TEXT", "nullable": true},
        {"name": "roof_inclination_deg", "type": "INTEGER", "nullable": true},
        {"name": "building_height_gt_7m", "type": "INTEGER", "nullable": true},
        {"name": "annual_consumption_kwh", "type": "REAL", "nullable": true},
        {"name": "costs_household_euro_mo", "type": "REAL", "nullable": true},
        {"name": "annual_heating_kwh", "type": "REAL", "nullable": true},
        {"name": "costs_heating_euro_mo", "type": "REAL", "nullable": true},
        {"name": "anlage_type", "type": "TEXT", "nullable": true},
        {"name": "feed_in_type", "type": "TEXT", "nullable": true},
        {"name": "module_quantity", "type": "INTEGER", "nullable": true},
        {"name": "selected_module_id", "type": "INTEGER", "nullable": true},
        {"name": "selected_inverter_id", "type": "INTEGER", "nullable": true},
        {"name": "include_storage", "type": "INTEGER", "nullable": true},
        {"name": "selected_storage_id", "type": "INTEGER", "nullable": true},
        {"name": "selected_storage_storage_power_kw", "type": "REAL", "nullable": true},
        {"name": "include_additional_components", "type": "INTEGER", "nullable": true},
        {"name": "selected_wallbox_id", "type": "INTEGER", "nullable": true},
        {"name": "selected_ems_id", "type": "INTEGER", "nullable": true},
        {"name": "selected_optimizer_id", "type": "INTEGER", "nullable": true},
        {"name": "selected_carport_id", "type": "INTEGER", "nullable": true},
        {"name": "selected_notstrom_id", "type": "INTEGER", "nullable": true},
        {"name": "selected_tierabwehr_id", "type": "INTEGER", "nullable": true},
        {"name": "visualize_roof_in_pdf", "type": "INTEGER", "nullable": true},
        {"name": "latitude", "type": "REAL", "nullable": true},
        {"name": "longitude", "type": "REAL", "nullable": true},
        {"name": "creation_date", "type": "TEXT", "nullable": true},
        {"name": "last_updated", "type": "TEXT", "nullable": true}
      ],
      "crudOperations": [
        {"method": "save_project", "pythonRef": "crm.py:save_project"},
        {"method": "load_project", "pythonRef": "crm.py:load_project"},
        {"method": "delete_project", "pythonRef": "crm.py:delete_project"},
        {"method": "load_projects_for_customer", "pythonRef": "crm.py:load_projects_for_customer"}
      ]
    },
    "customer_documents": {
      "tableName": "customer_documents",
      "pythonSource": "database.py:_create_customer_documents_table",
      "columns": [
        {"name": "id", "type": "INTEGER", "primaryKey": true, "autoIncrement": true},
        {"name": "customer_id", "type": "INTEGER", "notNull": true},
        {"name": "project_id", "type": "INTEGER", "nullable": true},
        {"name": "doc_type", "type": "TEXT", "nullable": true, "comment": "e.g. 'offer_pdf', 'image', 'note', 'other'"},
        {"name": "display_name", "type": "TEXT", "nullable": true},
        {"name": "file_name", "type": "TEXT", "nullable": true},
        {"name": "absolute_file_path", "type": "TEXT", "nullable": true},
        {"name": "uploaded_at", "type": "TIMESTAMP", "default": "CURRENT_TIMESTAMP"}
      ],
      "crudOperations": [
        {"method": "add_customer_document", "pythonRef": "database.py:add_customer_document"},
        {"method": "list_customer_documents", "pythonRef": "database.py:list_customer_documents"},
        {"method": "delete_customer_document", "pythonRef": "database.py:delete_customer_document"}
      ]
    },
    "products": {
      "tableName": "products", 
      "pythonSource": "product_db.py:create_product_table",
      "columns": [
        {"name": "id", "type": "INTEGER", "primaryKey": true, "autoIncrement": true},
        {"name": "category", "type": "TEXT", "notNull": true},
        {"name": "model_name", "type": "TEXT", "notNull": true, "unique": true},
        {"name": "brand", "type": "TEXT", "nullable": true},
        {"name": "price_euro", "type": "REAL", "nullable": true},
        {"name": "capacity_w", "type": "REAL", "nullable": true},
        {"name": "storage_power_kw", "type": "REAL", "nullable": true},
        {"name": "power_kw", "type": "REAL", "nullable": true},
        {"name": "max_cycles", "type": "INTEGER", "nullable": true},
        {"name": "warranty_years", "type": "INTEGER", "nullable": true},
        {"name": "length_m", "type": "REAL", "nullable": true},
        {"name": "width_m", "type": "REAL", "nullable": true},
        {"name": "weight_kg", "type": "REAL", "nullable": true},
        {"name": "efficiency_percent", "type": "REAL", "nullable": true},
        {"name": "origin_country", "type": "TEXT", "nullable": true},
        {"name": "description", "type": "TEXT", "nullable": true},
        {"name": "pros", "type": "TEXT", "nullable": true},
        {"name": "cons", "type": "TEXT", "nullable": true},
        {"name": "rating", "type": "REAL", "nullable": true},
        {"name": "image_base64", "type": "TEXT", "nullable": true},
        {"name": "created_at", "type": "TEXT", "default": "CURRENT_TIMESTAMP"},
        {"name": "updated_at", "type": "TEXT", "default": "CURRENT_TIMESTAMP"},
        {"name": "datasheet_link_db_path", "type": "TEXT", "nullable": true},
        {"name": "additional_cost_netto", "type": "REAL", "default": 0.0},
        {"name": "company_id", "type": "INTEGER", "nullable": true},
        {"name": "cell_technology", "type": "TEXT", "nullable": true},
        {"name": "module_structure", "type": "TEXT", "nullable": true},
        {"name": "cell_type", "type": "TEXT", "nullable": true},
        {"name": "version", "type": "TEXT", "nullable": true},
        {"name": "module_warranty_text", "type": "TEXT", "nullable": true},
        {"name": "labor_hours", "type": "REAL", "nullable": true}
      ],
      "crudOperations": [
        {"method": "add_product", "pythonRef": "product_db.py:add_product"},
        {"method": "list_products", "pythonRef": "product_db.py:list_products"},
        {"method": "get_product_by_id", "pythonRef": "product_db.py:get_product_by_id"},
        {"method": "update_product", "pythonRef": "product_db.py:update_product"},
        {"method": "delete_product", "pythonRef": "product_db.py:delete_product"}
      ]
    }
  },
  "pdfGeneration": {
    "mainFunction": "generate_offer_pdf",
    "pythonSource": "pdf_generator.py:generate_offer_pdf", 
    "checkboxOptions": {
      "extended_pages": "Extended PDF pages",
      "wp_additional_pages": "WÃ¤rmepumpen additional pages",
      "include_charts": "Include analysis charts",
      "include_company_docs": "Include company documents"
    },
    "templateEngine": "pdf_template_engine with YML coordinates and static backgrounds"
  },
  "legacy": {
    "customer_documents": {
          "type": "INTEGER",
          "notNull": true,
          "pk": false
        },
        "project_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "doc_type": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "file_name": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "absolute_file_path": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "uploaded_at": {
          "type": "TIMESTAMP",
          "notNull": false,
          "pk": false,
          "default": "CURRENT_TIMESTAMP"
        },
        "display_name": {
          "type": "OR",
          "notNull": false,
          "pk": false
        }
      },
      "fks": [
        {
          "column": "customer_id",
          "refTable": "customers",
          "refColumn": "id",
          "onDelete": null
        }
      ],
      "indexes": []
    },
    "admin_settings": {
      "columns": {
        "key": {
          "type": "TEXT",
          "notNull": false,
          "pk": true
        },
        "model_name": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "manufacturer": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "heating_output_kw": {
          "type": "REAL",
          "notNull": false,
          "pk": false
        },
        "power_consumption_kw": {
          "type": "REAL",
          "notNull": false,
          "pk": false
        },
        "scop": {
          "type": "REAL",
          "notNull": false,
          "pk": false
        },
        "value": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "last_modified": {
          "type": "TEXT",
          "notNull": false,
          "pk": false,
          "default": "CURRENT_TIMESTAMP"
        }
      },
      "fks": [],
      "indexes": []
    },
    "products": {
      "columns": {
        "id": {
          "type": "TEXT",
          "notNull": false,
          "pk": true
        },
        "manufacturer_id": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "model": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "category": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "attrs_json": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        }
      },
      "fks": [],
      "indexes": [
        "manufacturer_id"
      ]
    },
    "companies": {
      "columns": {
        "id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": true
        },
        "name": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "logo_base64": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "street": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "zip_code": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "city": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "phone": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "email": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "website": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "tax_id": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "commercial_register": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "bank_details": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "pdf_footer_text": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "is_default": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false,
          "default": "0"
        },
        "created_at": {
          "type": "TEXT",
          "notNull": false,
          "pk": false,
          "default": "CURRENT_TIMESTAMP"
        },
        "updated_at": {
          "type": "TEXT",
          "notNull": false,
          "pk": false,
          "default": "CURRENT_TIMESTAMP"
        }
      },
      "fks": [],
      "indexes": []
    },
    "company_documents": {
      "columns": {
        "id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": true
        },
        "company_id": {
          "type": "INTEGER",
          "notNull": true,
          "pk": false
        },
        "document_type": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "display_name": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "file_name": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "absolute_file_path": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "uploaded_at": {
          "type": "TEXT",
          "notNull": false,
          "pk": false,
          "default": "CURRENT_TIMESTAMP"
        }
      },
      "fks": [
        {
          "column": "company_id",
          "refTable": "companies",
          "refColumn": "id",
          "onDelete": "CASCADE"
        }
      ],
      "indexes": []
    },
    "pdf_templates": {
      "columns": {
        "id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": true
        },
        "template_type": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "name": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "content": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "image_data": {
          "type": "BLOB",
          "notNull": false,
          "pk": false
        },
        "created_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "updated_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        }
      },
      "fks": [],
      "indexes": [
        "template_type"
      ]
    },
    "company_text_templates": {
      "columns": {
        "id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": true
        },
        "company_id": {
          "type": "INTEGER",
          "notNull": true,
          "pk": false
        },
        "name": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "content": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "template_type": {
          "type": "TEXT",
          "notNull": true,
          "pk": false,
          "default": "'OFFER_TEXT'"
        },
        "created_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "updated_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        }
      },
      "fks": [
        {
          "column": "company_id",
          "refTable": "companies",
          "refColumn": "id",
          "onDelete": "CASCADE"
        }
      ],
      "indexes": [
        "company_id",
        "template_type"
      ]
    },
    "company_image_templates": {
      "columns": {
        "id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": true
        },
        "company_id": {
          "type": "INTEGER",
          "notNull": true,
          "pk": false
        },
        "name": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "template_type": {
          "type": "TEXT",
          "notNull": true,
          "pk": false,
          "default": "'TITLE_IMAGE'"
        },
        "file_path": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "created_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "updated_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        }
      },
      "fks": [
        {
          "column": "company_id",
          "refTable": "companies",
          "refColumn": "id",
          "onDelete": "CASCADE"
        }
      ],
      "indexes": [
        "company_id",
        "template_type"
      ]
    },
    "customers": {
      "columns": {
        "id": {
          "type": "TEXT",
          "notNull": false,
          "pk": true
        },
        "name": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "email": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "phone": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "address": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "created_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "updated_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        }
      },
      "fks": [],
      "indexes": []
    },
    "solar_configurations": {
      "columns": {
        "id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": true
        },
        "project_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "module_qty": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "module_brand": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "module_model": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "module_product_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "inverter_brand": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "inverter_model": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "inverter_product_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "inverter_qty": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false,
          "default": "1"
        },
        "with_storage": {
          "type": "BOOLEAN",
          "notNull": false,
          "pk": false,
          "default": "0"
        },
        "storage_brand": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "storage_model": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "storage_product_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "wallbox_enabled": {
          "type": "BOOLEAN",
          "notNull": false,
          "pk": false,
          "default": "0"
        },
        "wallbox_brand": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "wallbox_model": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "wallbox_product_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "ems_enabled": {
          "type": "BOOLEAN",
          "notNull": false,
          "pk": false,
          "default": "0"
        },
        "ems_brand": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "ems_model": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "ems_product_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "optimizer_enabled": {
          "type": "BOOLEAN",
          "notNull": false,
          "pk": false,
          "default": "0"
        },
        "optimizer_brand": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "optimizer_model": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "optimizer_product_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "carport_enabled": {
          "type": "BOOLEAN",
          "notNull": false,
          "pk": false,
          "default": "0"
        },
        "carport_brand": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "carport_model": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "carport_product_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "emergency_power_enabled": {
          "type": "BOOLEAN",
          "notNull": false,
          "pk": false,
          "default": "0"
        },
        "emergency_power_brand": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "emergency_power_model": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "emergency_power_product_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "animal_protection_enabled": {
          "type": "BOOLEAN",
          "notNull": false,
          "pk": false,
          "default": "0"
        },
        "animal_protection_brand": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "animal_protection_model": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "animal_protection_product_id": {
          "type": "INTEGER",
          "notNull": false,
          "pk": false
        },
        "total_kwp": {
          "type": "REAL",
          "notNull": false,
          "pk": false
        },
        "estimated_annual_yield_kwh": {
          "type": ")",
          "notNull": false,
          "pk": false
        },
        "calculation_status": {
          "type": "TEXT",
          "notNull": false,
          "pk": false,
          "default": "'PENDING'"
        },
        "created_at": {
          "type": "TIMESTAMP",
          "notNull": false,
          "pk": false,
          "default": "CURRENT_TIMESTAMP"
        },
        "updated_at": {
          "type": "TIMESTAMP",
          "notNull": false,
          "pk": false,
          "default": "CURRENT_TIMESTAMP"
        }
      },
      "fks": [],
      "indexes": []
    },
    "projects": {
      "columns": {
        "id": {
          "type": "TEXT",
          "notNull": false,
          "pk": true
        },
        "customer_id": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "title": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "status": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "notes": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "created_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "updated_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        }
      },
      "fks": [],
      "indexes": [
        "customer_id"
      ]
    },
    "documents": {
      "columns": {
        "id": {
          "type": "TEXT",
          "notNull": false,
          "pk": true
        },
        "customer_id": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "project_id": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "kind": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "path": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        },
        "meta_json": {
          "type": "TEXT",
          "notNull": false,
          "pk": false
        },
        "created_at": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        }
      },
      "fks": [],
      "indexes": [
        "customer_id"
      ]
    },
    "manufacturers": {
      "columns": {
        "id": {
          "type": "TEXT",
          "notNull": false,
          "pk": true
        },
        "name": {
          "type": "TEXT",
          "notNull": true,
          "pk": false
        }
      },
      "fks": [],
      "indexes": []
    }
  },
  "crud": {}
}