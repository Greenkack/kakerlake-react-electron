import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useMemo } from 'react';
import { useProject } from '../state/project';
import { Link } from 'react-router-dom';
export default function ProjectDashboard() {
    const { state } = useProject();
    const { mode, customer, building, consumption, options } = state;
    // Fortschrittsanalyse
    const progress = useMemo(() => {
        let steps = 0;
        let completed = 0;
        // Kundendaten
        steps++;
        if (customer.vorname && customer.nachname && customer.strasse)
            completed++;
        // Gebäudedaten
        steps++;
        if (building.roofArea && building.roofOrientation)
            completed++;
        // Verbrauchsanalyse
        steps++;
        if (consumption.annualKWhHousehold && consumption.annualKWhHousehold > 0)
            completed++;
        // Optionen
        steps++;
        if (mode && (options.battery_interest !== undefined || options.hp_interest !== undefined))
            completed++;
        return {
            total: steps,
            completed,
            percentage: Math.round((completed / steps) * 100)
        };
    }, [customer, building, consumption, options, mode]);
    // Schnellübersicht der eingegebenen Daten
    const summary = useMemo(() => {
        const hasCustomer = customer.vorname && customer.nachname;
        const hasBuilding = building.roofArea && building.roofOrientation;
        const hasConsumption = consumption.annualKWhHousehold && consumption.annualKWhHousehold > 0;
        const hasOptions = Boolean(mode);
        // Geschätzte Systemgröße
        const estimatedSize = building.roofArea
            ? Math.min(building.roofArea * 0.15, 20)
            : consumption.annualKWhHousehold
                ? Math.min(consumption.annualKWhHousehold / 1000, 20)
                : 10;
        return {
            hasCustomer,
            hasBuilding,
            hasConsumption,
            hasOptions,
            estimatedSize: Math.round(estimatedSize * 10) / 10,
            isComplete: hasCustomer && hasBuilding && hasConsumption && hasOptions
        };
    }, [customer, building, consumption, mode]);
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-xl p-6", children: [_jsx("h1", { className: "text-2xl font-bold mb-2", children: "Willkommen bei der PV-Anlagenplanung! \uD83C\uDF1E" }), _jsx("p", { className: "text-blue-100", children: "Erstellen Sie in wenigen Schritten ein individuelles Angebot f\u00FCr Ihre Photovoltaik-Anlage." })] }), _jsxs("div", { className: "bg-white rounded-xl shadow p-6", children: [_jsx("h2", { className: "text-xl font-semibold mb-4", children: "\uD83D\uDCCA Projektstatus" }), _jsxs("div", { className: "flex items-center mb-4", children: [_jsxs("div", { className: "flex-1", children: [_jsxs("div", { className: "flex justify-between text-sm mb-2", children: [_jsx("span", { className: "text-slate-600", children: "Fortschritt" }), _jsxs("span", { className: "font-medium", children: [progress.completed, "/", progress.total, " Schritte"] })] }), _jsx("div", { className: "w-full bg-slate-200 rounded-full h-3", children: _jsx("div", { className: "bg-gradient-to-r from-green-500 to-blue-500 h-3 rounded-full transition-all duration-700", style: { width: `${progress.percentage}%` } }) })] }), _jsxs("div", { className: "ml-4 text-2xl font-bold text-blue-600", children: [progress.percentage, "%"] })] }), _jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4", children: [_jsx("div", { className: `p-3 rounded-lg border ${summary.hasCustomer ? 'bg-green-50 border-green-200' : 'bg-slate-50 border-slate-200'}`, children: _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("div", { className: `w-6 h-6 rounded-full flex items-center justify-center ${summary.hasCustomer ? 'bg-green-500 text-white' : 'bg-slate-300 text-slate-600'}`, children: summary.hasCustomer ? '✓' : '1' }), _jsx("span", { className: "text-sm font-medium", children: "Kundendaten" })] }) }), _jsx("div", { className: `p-3 rounded-lg border ${summary.hasBuilding ? 'bg-green-50 border-green-200' : 'bg-slate-50 border-slate-200'}`, children: _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("div", { className: `w-6 h-6 rounded-full flex items-center justify-center ${summary.hasBuilding ? 'bg-green-500 text-white' : 'bg-slate-300 text-slate-600'}`, children: summary.hasBuilding ? '✓' : '2' }), _jsx("span", { className: "text-sm font-medium", children: "Geb\u00E4udedaten" })] }) }), _jsx("div", { className: `p-3 rounded-lg border ${summary.hasConsumption ? 'bg-green-50 border-green-200' : 'bg-slate-50 border-slate-200'}`, children: _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("div", { className: `w-6 h-6 rounded-full flex items-center justify-center ${summary.hasConsumption ? 'bg-green-500 text-white' : 'bg-slate-300 text-slate-600'}`, children: summary.hasConsumption ? '✓' : '3' }), _jsx("span", { className: "text-sm font-medium", children: "Verbrauchsdaten" })] }) }), _jsx("div", { className: `p-3 rounded-lg border ${summary.hasOptions ? 'bg-green-50 border-green-200' : 'bg-slate-50 border-slate-200'}`, children: _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx("div", { className: `w-6 h-6 rounded-full flex items-center justify-center ${summary.hasOptions ? 'bg-green-500 text-white' : 'bg-slate-300 text-slate-600'}`, children: summary.hasOptions ? '✓' : '4' }), _jsx("span", { className: "text-sm font-medium", children: "Optionen" })] }) })] })] }), (summary.hasConsumption || summary.hasBuilding) && (_jsxs("div", { className: "bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-6", children: [_jsx("h2", { className: "text-xl font-semibold text-green-800 mb-4", children: "\u26A1 Ihre Projekt-\u00DCbersicht" }), _jsxs("div", { className: "grid md:grid-cols-3 gap-4", children: [summary.hasCustomer && (_jsxs("div", { className: "bg-white rounded-lg p-4 shadow-sm", children: [_jsx("h4", { className: "font-medium text-slate-700 mb-2", children: "\uD83D\uDC64 Kunde" }), _jsxs("p", { className: "text-sm text-slate-600", children: [customer.vorname, " ", customer.nachname, customer.strasse && (_jsxs(_Fragment, { children: [_jsx("br", {}), customer.strasse, " ", customer.hausnummer] }))] })] })), summary.hasBuilding && (_jsxs("div", { className: "bg-white rounded-lg p-4 shadow-sm", children: [_jsx("h4", { className: "font-medium text-slate-700 mb-2", children: "\uD83C\uDFE0 Geb\u00E4ude" }), _jsxs("p", { className: "text-sm text-slate-600", children: ["Dachfl\u00E4che: ", building.roofArea, "m\u00B2", _jsx("br", {}), "Ausrichtung: ", building.roofOrientation, _jsx("br", {}), building.roofTilt && `Neigung: ${building.roofTilt}°`] })] })), summary.hasConsumption && (_jsxs("div", { className: "bg-white rounded-lg p-4 shadow-sm", children: [_jsx("h4", { className: "font-medium text-slate-700 mb-2", children: "\u26A1 Verbrauch" }), _jsxs("p", { className: "text-sm text-slate-600", children: ["Haushalt: ", consumption.annualKWhHousehold?.toLocaleString('de-DE'), " kWh/Jahr", _jsx("br", {}), consumption.annualKWhHeating && `Heizung: ${consumption.annualKWhHeating?.toLocaleString('de-DE')} kWh/Jahr`, consumption.homeOfficeHours && `HomeOffice: ${consumption.homeOfficeHours}h/Tag`] })] }))] }), (summary.hasBuilding || summary.hasConsumption) && (_jsx("div", { className: "mt-4 p-4 bg-white rounded-lg shadow-sm", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h4", { className: "font-medium text-slate-700", children: "\uD83D\uDD2E Erste Sch\u00E4tzung" }), _jsx("p", { className: "text-sm text-slate-600", children: "Empfohlene Anlagengr\u00F6\u00DFe basierend auf Ihren Daten" })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-2xl font-bold text-blue-600", children: [summary.estimatedSize, " kWp"] }), _jsxs("div", { className: "text-sm text-slate-500", children: ["\u2248 ", Math.round(summary.estimatedSize * 950).toLocaleString('de-DE'), " kWh/Jahr"] })] })] }) }))] })), _jsxs("div", { className: "grid md:grid-cols-2 lg:grid-cols-4 gap-4", children: [_jsxs(Link, { to: "/project/customer", className: "bg-white rounded-xl shadow p-6 hover:shadow-lg transition-shadow border-2 hover:border-blue-200", children: [_jsx("div", { className: "text-3xl mb-3", children: "\uD83D\uDC64" }), _jsx("h3", { className: "font-semibold mb-1", children: "Kundendaten" }), _jsx("p", { className: "text-sm text-slate-600", children: "Kontaktinformationen erfassen" }), summary.hasCustomer && (_jsx("div", { className: "mt-2 text-xs text-green-600 font-medium", children: "\u2713 Vollst\u00E4ndig" }))] }), _jsxs(Link, { to: "/project/building", className: "bg-white rounded-xl shadow p-6 hover:shadow-lg transition-shadow border-2 hover:border-blue-200", children: [_jsx("div", { className: "text-3xl mb-3", children: "\uD83C\uDFE0" }), _jsx("h3", { className: "font-semibold mb-1", children: "Geb\u00E4udedaten" }), _jsx("p", { className: "text-sm text-slate-600", children: "Dach und Standort definieren" }), summary.hasBuilding && (_jsx("div", { className: "mt-2 text-xs text-green-600 font-medium", children: "\u2713 Vollst\u00E4ndig" }))] }), _jsxs(Link, { to: "/project/demand", className: "bg-white rounded-xl shadow p-6 hover:shadow-lg transition-shadow border-2 hover:border-blue-200", children: [_jsx("div", { className: "text-3xl mb-3", children: "\u26A1" }), _jsx("h3", { className: "font-semibold mb-1", children: "Bedarfsanalyse" }), _jsx("p", { className: "text-sm text-slate-600", children: "Energieverbrauch analysieren" }), summary.hasConsumption && (_jsx("div", { className: "mt-2 text-xs text-green-600 font-medium", children: "\u2713 Vollst\u00E4ndig" }))] }), _jsxs(Link, { to: "/project/options", className: "bg-white rounded-xl shadow p-6 hover:shadow-lg transition-shadow border-2 hover:border-blue-200", children: [_jsx("div", { className: "text-3xl mb-3", children: "\u2699\uFE0F" }), _jsx("h3", { className: "font-semibold mb-1", children: "Optionen" }), _jsx("p", { className: "text-sm text-slate-600", children: "Speicher und Zusatzkomponenten" }), summary.hasOptions && (_jsx("div", { className: "mt-2 text-xs text-green-600 font-medium", children: "\u2713 Vollst\u00E4ndig" }))] })] }), summary.isComplete && (_jsxs("div", { className: "bg-gradient-to-r from-green-500 to-blue-600 text-white rounded-xl p-6 text-center", children: [_jsx("h3", { className: "text-xl font-bold mb-2", children: "\uD83C\uDF89 Projektkonfiguration abgeschlossen!" }), _jsx("p", { className: "mb-4 text-green-100", children: "Alle ben\u00F6tigten Daten wurden erfasst. Jetzt k\u00F6nnen Sie Ihre detaillierten Ergebnisse einsehen." }), _jsx(Link, { to: "/project/results", className: "inline-block bg-white text-green-600 px-6 py-3 rounded-lg font-semibold hover:bg-green-50 transition-colors", children: "\uD83D\uDCCA Ergebnisse anzeigen" })] })), progress.completed === 0 && (_jsxs("div", { className: "bg-blue-50 border border-blue-200 rounded-xl p-6", children: [_jsx("h3", { className: "text-lg font-semibold text-blue-800 mb-3", children: "\uD83D\uDE80 Schnellstart" }), _jsx("p", { className: "text-blue-700 mb-4", children: "Beginnen Sie mit der Erfassung der Kundendaten oder springen Sie direkt zur Geb\u00E4udeanalyse." }), _jsxs("div", { className: "flex gap-3", children: [_jsx(Link, { to: "/project/customer", className: "bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors", children: "\uD83D\uDC64 Mit Kundendaten starten" }), _jsx(Link, { to: "/project/building", className: "bg-white text-blue-600 border border-blue-600 px-4 py-2 rounded-lg text-sm hover:bg-blue-50 transition-colors", children: "\uD83C\uDFE0 Mit Geb\u00E4udedaten starten" })] })] }))] }));
}
